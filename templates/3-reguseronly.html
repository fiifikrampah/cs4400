<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
    <script src="../static/js/login.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <!--<script src="../Scripts/login.js"></script>-->
<title>Register User Only</title><br></br>

</head>
<body>
<div align=center class="container-fluid">
<h1>Register User</h1>

<form class="form-group" style="width:20%" action="/register_user" method="post" enctype="multipart/form-data">

        <label for="fname">First Name</label>
        <input type="text" name="firstname" id="fname" class="form-control" placeholder="First Name" required autofocus>
        <br>

        <label for="lname">Last Name</label>
        <input type="text" name="lastname" id="lname" class="form-control" placeholder="Last Name" required autofocus>
        <br>

        <label for="uname">Username</label>
        <input type="text" name="username" id="uname" class="form-control" placeholder="Username" required autofocus>
        <br>

        <label for="pword">Password</label>
        <input type="password" name="password" id="pword" class="form-control" placeholder="Password" required autofocus>
        <br>

        <label for="cpword">Confirm Password</label>
        <input type="password" name="confirm_password" id="cpword" class="form-control" placeholder="Confirm Password" required autofocus>
        <br>

        <!-- fix: allow multiple emails -->

        <label for="email-add">Email</label>
         <div id="TextBoxesGroup">
    <div id="TextBoxDiv1">
      <input type="textbox" id="textbox" name="email" class="form-control" placeholder="Email" autofocus>
    </div>
  </div>
  <input class=" btn btn-default" type="button" value="Add Email" id="addButton">
  <input class=" btn btn-default"type="button" value="Remove Email" id="removeButton">

  <br></br>


        <button id="btnRegister" class="btn btn-lg btn-primary btn-block" type="submit">Register</button>
        <br>
        <a class=" btn btn-default" href="to_register_navigation" role="button">Back</a>
        <p id = "feedback"  style="color: red">{{error}}</p>

     


<script type="text/javascript">
    
$(document).ready(function boxes() {

  var counter = 2;
  var counterN = counter - 1;
  var emails = []

  $("#addButton").click(function() {

   
    if (counter > 1) {
      emails.push($('#textbox' + counterN).val());
    }
    counterN++;
    console.log(emails);


    var newTextBoxDiv = $(document.createElement('div'))
      .attr("id", 'TextBoxDiv' + counter);

    newTextBoxDiv.after().html('<input type="text" name="email" class="form-control" placeholder="Email" autofocus' + counter +
      '" id="textbox' + counter + '" value="" >');

    newTextBoxDiv.appendTo("#TextBoxesGroup");


    counter++;
  });

  $("#removeButton").click(function() {
    if (counter == 2) {
      alert("You must have at least one email");
      return false;
    }

    counter--;

    $("#TextBoxDiv" + counter).remove();

    if (counter - emails.length == 0) {
      emails.pop();
    }
    counterN--;
    console.log(emails);

  });

  $("#addButton").click(function() {
    emails.push($('#textbox' + counterN).val());
    counterN++;
    console.log(emails);
    // $.post("add_email", emails, function(){
    
    $.ajax({
      type: "POST",
      contentType: "application/json;charset=utf-8",
      url: "/add_email",
      traditional: "true",
      data: JSON.stringify({emails}),
      dataType: "json"
    });
  });

});

</script>
 </form>
</div>

</body>
</html>